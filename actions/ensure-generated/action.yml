name: Verify values.yaml
description: Ensure that values.yaml is generated from values.schema.json
runs:
  using: composite
  steps:
    - name: Install helm-values-gen
      uses: giantswarm/install-binary-action@4b9f8dcb6b036f2d4c570718ee5417ecc2cb4d67 # v3.1.0
      with:
        binary: "helm-values-gen"
        version: "1.0.4"
        smoke_test: "${binary} -v"
    - name: Run helm-values-gen
      shell: bash
      run: ${{ github.action_path }}/verify-values-yaml.sh ${{ inputs.rule-set }}
